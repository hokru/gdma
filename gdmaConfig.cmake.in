set(GDMA_CONFIG_PATH ${CMAKE_CURRENT_LIST_DIR})

find_library(GDMA_LIBRARY NAMES gdma PATHS ${GDMA_CONFIG_PATH}/lib 
             NO_DEFAULT_PATH)
find_path(GDMA_INCLUDE_DIR NAMES GDMA/GDMA_MANGLE.h 
          PATHS ${GDMA_CONFIG_PATH}/include NO_DEFAULT_PATH)

if(${GDMA_LIBRARY} MATCHES GDMA_LIBRARY-NOTFOUND OR
   ${GDMA_INCLUDE_DIR} MATCHES GDMA_INCLUDE_DIR-NOTFOUND)
   set(gdma_FOUND FALSE)
   set(GDMA_FOUND FALSE)
endif()
add_library(gdma INTERFACE)
set(GDMA_LIBRARIES ${GDMA_LIBRARY} @CMAKE_Fortran_IMPLICIT_LINK_LIBRARIES@)
target_link_libraries(gdma INTERFACE ${GDMA_LIBRARIES})
set(GDMA_INCLUDE_DIRS ${GDMA_INCLUDE_DIR})
target_include_directories(gdma INTERFACE ${GDMA_INCLUDE_DIRS})
set(gdma_FOUND TRUE)
set(GDMA_FOUND TRUE)
